---
# Ansible Inventory for Keycloak Migration

all:
  children:
    keycloak_servers:
      hosts:
        # Production servers
        keycloak-prod-1:
          ansible_host: 192.168.1.10
          ansible_user: root
          keycloak_migration_profile: kubernetes-cluster-production
          keycloak_db_password: "{{ vault_keycloak_prod_db_password }}"

        keycloak-prod-2:
          ansible_host: 192.168.1.11
          ansible_user: root
          keycloak_migration_profile: kubernetes-cluster-production
          keycloak_db_password: "{{ vault_keycloak_prod_db_password }}"

        # Staging server
        keycloak-staging:
          ansible_host: 192.168.1.20
          ansible_user: admin
          ansible_become: true
          keycloak_migration_profile: docker-compose-dev
          keycloak_db_password: "{{ vault_keycloak_staging_db_password }}"

      vars:
        # Common variables for all Keycloak servers
        migration_tool_version: "v3.0.0"
        auto_rollback: true
        skip_preflight: false

    # Group for testing (dry-run only)
    keycloak_test:
      hosts:
        keycloak-test:
          ansible_host: 192.168.1.30
          ansible_user: testuser
          ansible_become: true
          keycloak_migration_profile: standalone-postgresql
          dry_run: true
